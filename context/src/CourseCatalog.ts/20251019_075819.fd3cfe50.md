---
timestamp: 'Sun Oct 19 2025 07:58:19 GMT-0400 (Eastern Daylight Time)'
content_id: fd3cfe506fbea9a8243d7a8ad6f6fe7d8873c483cfa981c05c544d8f6fabe155
---

# file: src/CourseCatalog.ts

```typescript
// states

export interface Requirement {
  code: string; // e.g., "QR", "HSCI", "LAB", "WRI"
  name?: string; // Human-readable label
}

export interface TimeSlot {
  // Example: { day: "Mon", start: "10:00", end: "11:20", tz: "America/New_York" }
  day: "Mon" | "Tue" | "Wed" | "Thu" | "Fri" | "Sat" | "Sun";
  start: string; // "HH:MM" 24h
  end: string; // "HH:MM" 24h
  tz?: string;
}

export interface Course {
  courseId: string; // authoritative ID, e.g., "CS-220-01-FA25"
  title: string; // "Blue on the Move"
  instructor: string; // "Ada Lovelace"
  meetingTimes: TimeSlot[];
  location: string; // "SCI 101" or "Zoom"
  requirements: Requirement[];
  campus: string; // "Wellesley", "MIT", etc.
}

/**
 * === CourseCatalog ===========================================================
 * purpose:
 *   provide authoritative course data (times, locations, instructors, requirements)
 *   for search and planning
 *
 * principle:
 *   the catalog aggregates courses each term; students query it for information,
 *   and other concepts (Schedule, RequirementTracker, CrossRegTravel) rely on it
 *   for consistency
 *
 * state:
 *   a set of Courses keyed by courseId
 *
 * actions:
 *   - search(query, filters) -> Set<Course>
 *   - getById(courseId) -> Course
 *   - listByRequirement(req) -> Set<Course>
 */
export class CourseCatalog {
  /**
   * === State: the authoritative set of Courses ===============================
   * Internally we keep both:
   *  - a Map keyed by courseId for fast lookups
   *  - an array snapshot for simple scans (search/filter)
   * You can later swap the backing store for a DB without changing method signatures.
   */
  private byId: Map<string, Course> = new Map();
  private all: Course[] = [];

  constructor(initialCourses: Course[] = []) {
    this.load(initialCourses);
  }

  /**
   * Load/replace the catalog content for the current term.
   * (Not part of the original actions, but useful for bootstrapping/tests.)
   */
  load(courses: Course[]): void {
    this.byId.clear();
    this.all = [];
    for (const c of courses) {
      this.byId.set(c.courseId, c);
      this.all.push(c);
    }
  }

  /**
   * === Action: getById(courseId) -> Course ===================================
   * requires: a course with this courseId exists
   * effects:  returns that course
   *
   * Throws a descriptive error if not found (so callers can handle it explicitly).
   */
  getById(courseId: string): Course {
    const found = this.byId.get(courseId);
    if (!found) {
      throw new Error(
        `CourseCatalog.getById: courseId "${courseId}" not found`,
      );
    }
    return found;
  }

  /**
   * === Action: listByRequirement(req) -> Set<Course> ==========================
   * effects: return all courses that satisfy req
   *
   * Matching rule: any course whose `requirements` contains a Requirement
   * with the same `code` (case-insensitive) is included.
   */
  listByRequirement(req: Requirement): Set<Course> {
    const code = req.code.toLowerCase();
    const results = new Set<Course>();
    for (const c of this.all) {
      if (c.requirements?.some((r) => r.code.toLowerCase() === code)) {
        results.add(c);
      }
    }
    return results;
  }
}

```
