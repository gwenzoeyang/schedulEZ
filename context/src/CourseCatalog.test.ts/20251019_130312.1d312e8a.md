---
timestamp: 'Sun Oct 19 2025 13:03:12 GMT-0400 (Eastern Daylight Time)'
content_id: 1d312e8a16d5878aa53430e361897d1adad9128e77ed1b3c7a3a84cd0248c12e
---

# file: src/CourseCatalog.test.ts

```typescript
// src/tests/course_catalog_test.ts
import { assert, assertEquals, assertThrows } from "@std/assert";

import { CourseCatalog } from "/Users/gwen-zoeyang/schedulEZ/src/CourseCatalog.ts";

Deno.test("CourseCatalog.fromDbRows + getById returns adapted course", () => {
  const rows = [
    {
      courseID: "CS220-01",
      title: "Data Structures",
      instructor: "Ada Lovelace",
      meetingTimes: ["MWF - 10:00 - 11:20"],
      requirements: [[{ code: "QR" }]],
      campus: "Wellesley",
    },
  ];
  const catalog = CourseCatalog.fromDbRows(rows as any);

  const c = catalog.getById("CS220-01");
  assertEquals(c.title, "Data Structures");
  assertEquals(c.instructor, "Ada Lovelace");
  assertEquals(c.meetingTimes.length, 3); // M, W, F
  assertEquals(c.requirements[0][0].code, "QR");
});

Deno.test("CourseCatalog.getById throws for missing", () => {
  const catalog = new CourseCatalog([]);
  assertThrows(
    () => catalog.getById("NOPE"),
    Error,
    `CourseCatalog.getById: courseId "NOPE" not found`,
  );
});

Deno.test("CourseCatalog.search - instructor fuzzy & department filter", () => {
  const rows = [
    {
      courseID: "CS220",
      title: "Data Structures",
      instructor: "Ada Lovelace",
      meetingTimes: ["M - 10:00 - 11:20"],
      requirements: [[]],
    },
    {
      courseID: "MATH101",
      title: "Calculus",
      instructor: "Isaac Newton",
      meetingTimes: ["T - 10:00 - 11:20"],
      requirements: [[]],
    },
  ];
  const catalog = CourseCatalog.fromDbRows(rows as any);

  // Fuzzy instructor search
  let res = catalog.search(undefined, { instructor: "lovel" } as any);
  assertEquals(res.size, 1);
  assert([...res][0].courseID === "CS220");

  // Department derived from courseID ("CS" vs "MATH")
  res = catalog.search(undefined, { department: "MATH" } as any);
  assertEquals(res.size, 1);
  assert([...res][0].courseID === "MATH101");
});

Deno.test("CourseCatalog.search - day & timeWindow overlap", () => {
  const rows = [
    {
      courseID: "BIOE101",
      title: "Intro BioE",
      instructor: "Marie Curie",
      meetingTimes: ["MW - 09:00 - 10:00"], // 2 slots
      requirements: [[]],
    },
    {
      courseID: "EECS200",
      title: "Circuits",
      instructor: "Nikola Tesla",
      meetingTimes: ["F - 15:00 - 16:30"], // Fri only
      requirements: [[]],
    },
  ];
  const catalog = CourseCatalog.fromDbRows(rows as any);

  // Day filter
  let res = catalog.search(undefined, { day: "M" } as any);
  assertEquals(res.size, 1);
  assert([...res][0].courseID === "BIOE101");

  // Time window overlap (should include BIOE101)
  res = catalog.search(
    undefined,
    { timeWindow: { start: "08:30", end: "09:30" } } as any,
  );
  assertEquals(res.size, 1);
  assert([...res][0].courseID === "BIOE101");
});

```
